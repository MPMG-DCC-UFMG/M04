/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Scala library project to get you started.
 * For more details take a look at the Scala plugin chapter in the Gradle
 * User Manual available at https://docs.gradle.org/5.6.2/userguide/scala_plugin.html
 */

buildscript {
    repositories {
        mavenLocal()
        mavenCentral()
        jcenter()
        maven { url "https://plugins.gradle.org/m2/" }
    }

    dependencies {
        classpath 'com.github.jengelman.gradle.plugins:shadow:2.0.4'
    }
}

plugins {
    // Apply the scala plugin to add support for Scala
    id 'scala'
}

apply plugin: 'com.github.johnrengelman.shadow'

repositories {
    // Use jcenter for resolving dependencies.
    // You can declare any Maven/Ivy/file repository here.
    jcenter()
    maven { url 'https://repo.hortonworks.com/content/repositories/releases/' }
    maven { url 'https://dl.bintray.com/spark-packages/maven/' }
}

dependencies {
    implementation files("${System.getenv("FRACTAL_HOME")}/build/libs/fractal-SPARK-2.3.2.jar")

    // https://mvnrepository.com/artifact/com.lihaoyi/upickle
    //implementation 'com.lihaoyi:upickle_2.11:0.7.4'

    compile group: 'com.lihaoyi', name: 'upickle_2.11', version: '0.7.4'

    // https://mvnrepository.com/artifact/com.hortonworks.hive/hive-warehouse-connector
    //implementation 'com.hortonworks.hive:hive-warehouse-connector_2.11:1.0.0.3.1.5.0-152'

    compile group: 'com.hortonworks.hive', name: 'hive-warehouse-connector_2.11', version: '1.0.0.3.1.0.0-78'

    compile group: 'graphframes', name: 'graphframes', version: '0.6.0-spark2.3-s_2.11'
}

shadowJar {
    zip64 true
    transform(com.github.jengelman.gradle.plugins.shadow.transformers.AppendingTransformer.class) {
        resource = "reference.conf"
    }
}

task assemble(dependsOn: ['shadowJar'], overwrite: true)
